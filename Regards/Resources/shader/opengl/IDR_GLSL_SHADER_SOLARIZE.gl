uniform sampler2D textureScreen;
uniform float threshold;

void main(void)
{	
	vec4 src_color = texture2D(textureScreen, gl_TexCoord[0].st).rgba;												  
	float color = threshold / 255.0; 
	float red = src_color.r;
	float green = src_color.g;
	float blue = src_color.b;
	
	if (red > color)
		red = 1.0 - red;
		
	if (green > color)
		green = 1.0 - green;

	if (blue > color)
		blue = 1.0 - blue;

	src_color = vec4(red, green, blue, src_color.a);
	
	gl_FragColor = src_color;
}

