<html><!-- Created using the cpp_pretty_printer from the dlib C++ library.  See http://dlib.net for updates. --><head><title>dlib C++ Library - jidctint.c</title></head><body bgcolor='white'><pre>
<font color='#009900'>/*
 * jidctint.c
 *
 * Copyright (C) 1991-1998, Thomas G. Lane.
 * Modification developed 2002-2009 by Guido Vollbeding.
 * This file is part of the Independent JPEG Group's software.
 * For conditions of distribution and use, see the accompanying README file.
 *
 * This file contains a slow-but-accurate integer implementation of the
 * inverse DCT (Discrete Cosine Transform).  In the IJG code, this routine
 * must also perform dequantization of the input coefficients.
 *
 * A 2-D IDCT can be done by 1-D IDCT on each column followed by 1-D IDCT
 * on each row (or vice versa, but it's more convenient to emit a row at
 * a time).  Direct algorithms are also available, but they are much more
 * complex and seem not to be any faster when reduced to code.
 *
 * This implementation is based on an algorithm described in
 *   C. Loeffler, A. Ligtenberg and G. Moschytz, "Practical Fast 1-D DCT
 *   Algorithms with 11 Multiplications", Proc. Int'l. Conf. on Acoustics,
 *   Speech, and Signal Processing 1989 (ICASSP '89), pp. 988-991.
 * The primary algorithm described there uses 11 multiplies and 29 adds.
 * We use their alternate method with 12 multiplies and 32 adds.
 * The advantage of this method is that no data path contains more than one
 * multiplication; this allows a very simple and accurate implementation in
 * scaled fixed-point arithmetic, with a minimal number of shifts.
 *
 * We also provide IDCT routines with various output sample block sizes for
 * direct resolution reduction or enlargement and for direct resolving the
 * common 2x1 and 1x2 subsampling cases without additional resampling: NxN
 * (N=1...16), 2NxN, and Nx2N (N=1...8) pixels for one 8x8 input DCT block.
 *
 * For N&lt;8 we simply take the corresponding low-frequency coefficients of
 * the 8x8 input DCT block and apply an NxN point IDCT on the sub-block
 * to yield the downscaled outputs.
 * This can be seen as direct low-pass downsampling from the DCT domain
 * point of view rather than the usual spatial domain point of view,
 * yielding significant computational savings and results at least
 * as good as common bilinear (averaging) spatial downsampling.
 *
 * For N&gt;8 we apply a partial NxN IDCT on the 8 input coefficients as
 * lower frequencies and higher frequencies assumed to be zero.
 * It turns out that the computational effort is similar to the 8x8 IDCT
 * regarding the output size.
 * Furthermore, the scaling and descaling is the same for all IDCT sizes.
 *
 * CAUTION: We rely on the FIX() macro except for the N=1,2,4,8 cases
 * since there would be too many additional constants to pre-calculate.
 */</font>

<font color='#0000FF'>#define</font> JPEG_INTERNALS
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jinclude.h.html'>jinclude.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jpeglib.h.html'>jpeglib.h</a>"
<font color='#0000FF'>#include</font> "<a style='text-decoration:none' href='jdct.h.html'>jdct.h</a>"		<font color='#009900'>/* Private declarations for DCT subsystem */</font>

<font color='#0000FF'>#ifdef</font> DCT_ISLOW_SUPPORTED


<font color='#009900'>/*
 * This module is specialized to the case DCTSIZE = 8.
 */</font>

<font color='#0000FF'>#if</font> DCTSIZE <font color='#5555FF'>!</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
  Sorry, <font color='#0000FF'>this</font> code only copes with <font color='#979000'>8</font>x8 DCT blocks. <font color='#009900'>/* deliberate syntax err */</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/*
 * The poop on this scaling stuff is as follows:
 *
 * Each 1-D IDCT step produces outputs which are a factor of sqrt(N)
 * larger than the true IDCT outputs.  The final outputs are therefore
 * a factor of N larger than desired; since N=8 this can be cured by
 * a simple right shift at the end of the algorithm.  The advantage of
 * this arrangement is that we save two multiplications per 1-D IDCT,
 * because the y0 and y4 inputs need not be divided by sqrt(N).
 *
 * We have to do addition and subtraction of the integer inputs, which
 * is no problem, and multiplication by fractional constants, which is
 * a problem to do in integer arithmetic.  We multiply all the constants
 * by CONST_SCALE and convert them to integer constants (thus retaining
 * CONST_BITS bits of precision in the constants).  After doing a
 * multiplication we have to divide the product by CONST_SCALE, with proper
 * rounding, to produce the correct output.  This division can be done
 * cheaply as a right shift of CONST_BITS bits.  We postpone shifting
 * as long as possible so that partial sums can be added together with
 * full fractional precision.
 *
 * The outputs of the first pass are scaled up by PASS1_BITS bits so that
 * they are represented to better-than-integral precision.  These outputs
 * require BITS_IN_JSAMPLE + PASS1_BITS + 3 bits; this fits in a 16-bit word
 * with the recommended scaling.  (To scale up 12-bit sample data further, an
 * intermediate INT32 array would be needed.)
 *
 * To avoid overflow of the 32-bit intermediate results in pass 2, we must
 * have BITS_IN_JSAMPLE + CONST_BITS + PASS1_BITS &lt;= 26.  Error analysis
 * shows that the values given below are the most effective.
 */</font>

<font color='#0000FF'>#if</font> BITS_IN_JSAMPLE <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
<font color='#0000FF'>#define</font> CONST_BITS  <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> PASS1_BITS  <font color='#979000'>2</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> CONST_BITS  <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> PASS1_BITS  <font color='#979000'>1</font>		<font color='#009900'>/* lose a little precision to avoid overflow */</font>
<font color='#0000FF'>#endif</font>

<font color='#009900'>/* Some C compilers fail to reduce "FIX(constant)" at compile time, thus
 * causing a lot of useless floating-point operations at run time.
 * To get around this we use the following pre-calculated constants.
 * If you change CONST_BITS you may want to add appropriate values.
 * (With a reasonable C compiler, you can just rely on the FIX() macro...)
 */</font>

<font color='#0000FF'>#if</font> CONST_BITS <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>13</font>
<font color='#0000FF'>#define</font> FIX_0_298631336  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>2446</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.298631336) */</font>
<font color='#0000FF'>#define</font> FIX_0_390180644  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>3196</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.390180644) */</font>
<font color='#0000FF'>#define</font> FIX_0_541196100  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>4433</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.541196100) */</font>
<font color='#0000FF'>#define</font> FIX_0_765366865  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>6270</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.765366865) */</font>
<font color='#0000FF'>#define</font> FIX_0_899976223  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>7373</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(0.899976223) */</font>
<font color='#0000FF'>#define</font> FIX_1_175875602  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>9633</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.175875602) */</font>
<font color='#0000FF'>#define</font> FIX_1_501321110  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>12299</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.501321110) */</font>
<font color='#0000FF'>#define</font> FIX_1_847759065  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>15137</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.847759065) */</font>
<font color='#0000FF'>#define</font> FIX_1_961570560  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>16069</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(1.961570560) */</font>
<font color='#0000FF'>#define</font> FIX_2_053119869  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>16819</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(2.053119869) */</font>
<font color='#0000FF'>#define</font> FIX_2_562915447  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>20995</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(2.562915447) */</font>
<font color='#0000FF'>#define</font> FIX_3_072711026  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font>  <font color='#979000'>25172</font><font face='Lucida Console'>)</font>	<font color='#009900'>/* FIX(3.072711026) */</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> FIX_0_298631336  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.298631336</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_390180644  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.390180644</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_541196100  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.541196100</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_765366865  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.765366865</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_0_899976223  FIX<font face='Lucida Console'>(</font><font color='#979000'>0.899976223</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_175875602  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.175875602</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_501321110  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.501321110</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_847759065  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.847759065</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_1_961570560  FIX<font face='Lucida Console'>(</font><font color='#979000'>1.961570560</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_2_053119869  FIX<font face='Lucida Console'>(</font><font color='#979000'>2.053119869</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_2_562915447  FIX<font face='Lucida Console'>(</font><font color='#979000'>2.562915447</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#define</font> FIX_3_072711026  FIX<font face='Lucida Console'>(</font><font color='#979000'>3.072711026</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/* Multiply an INT32 variable by an INT32 constant to yield an INT32 result.
 * For 8-bit samples with the recommended scaling, all the variable
 * and constant values involved are no more than 16 bits wide, so a
 * 16x16-&gt;32 bit multiply can be used instead of a full 32x32 multiply.
 * For 12-bit samples, a full 32-bit multiplication will be needed.
 */</font>

<font color='#0000FF'>#if</font> BITS_IN_JSAMPLE <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>
<font color='#0000FF'>#define</font> MULTIPLY<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>  MULTIPLY16C16<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#else</font>
<font color='#0000FF'>#define</font> MULTIPLY<font face='Lucida Console'>(</font>var,<font color='#0000FF'>const</font><font face='Lucida Console'>)</font>  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>var<font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> <font face='Lucida Console'>(</font><font color='#0000FF'>const</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>
<font color='#0000FF'>#endif</font>


<font color='#009900'>/* Dequantize a coefficient by multiplying it by the multiplier-table
 * entry; produce an int result.  In this module, both inputs and result
 * are 16 bits or less, so either int or short multiply will work.
 */</font>

<font color='#0000FF'>#define</font> DEQUANTIZE<font face='Lucida Console'>(</font>coef,quantval<font face='Lucida Console'>)</font>  <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>ISLOW_MULT_TYPE<font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>coef<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>*</font> <font face='Lucida Console'>(</font>quantval<font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_islow'></a>jpeg_idct_islow</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[DCTSIZE2];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true IDCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE; ctr <font color='#5555FF'>&gt;</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Due to quantization, we will usually find that many of the input
     * coefficients are zero, especially the AC terms.  We can exploit this
     * by short-circuiting the IDCT calculation for any column in which all
     * the AC terms are zero.  In that case each output is equal to the
     * DC coefficient (with scale factor as needed).
     * With typical images and quantization tables, half or more of the
     * column DCT calculations can be simplified this way.
     */</font>

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
      <font color='#009900'>/* AC terms all zero */</font>
      <font color='#0000FF'><u>int</u></font> dcval <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> dcval;

      inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
      quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      <font color='#0000FF'>continue</font>;
    <b>}</b>

    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>
    
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp0 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z3;
    tmp1 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z3;

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    
    z2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;

    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>

    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    
    inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
    quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process rows from work array, store into output array. */</font>
  <font color='#009900'>/* Note that we must descale the results by a factor of 8 == 2**3, */</font>
  <font color='#009900'>/* and also undo the PASS1_BITS scaling. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> DCTSIZE; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;
    <font color='#009900'>/* Rows of zeroes can be exploited in the same way as we did with columns.
     * However, the column calculation has created many nonzero AC terms, so
     * the simplification applies less often (typically 5% to 10% of the time).
     * On machines with very fast multiplication, it's possible that the
     * test takes more time than it's worth.  In that case this section
     * may be commented out.
     */</font>

<font color='#0000FF'>#ifndef</font> NO_ZERO_ROW_TEST
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>wsptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	wsptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> wsptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
      <font color='#009900'>/* AC terms all zero */</font>
      JSAMPLE dcval <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>], PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
				  <font color='#5555FF'>&amp;</font> RANGE_MASK];

      outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> dcval;
      outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> dcval;

      wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
      <font color='#0000FF'>continue</font>;
    <b>}</b>
<font color='#0000FF'>#endif</font>

    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>
    
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];

    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    tmp3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];

    z2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;

    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>

<font color='#0000FF'>#ifdef</font> IDCT_SCALING_SUPPORTED


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 7x7 output block.
 *
 * Optimized algorithm with 12 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/14).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_7x7'></a>jpeg_idct_7x7</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp10, tmp11, tmp12, tmp13;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>7</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c4 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c6 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.841218003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c4-c6 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp0;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp13; <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.077722536</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c2-c4-c6 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.470602249</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c2+c4+c6 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.935414347</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170262339</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.870828693</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c3+c1-c5 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 7 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp13 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c4 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c6 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.841218003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c4-c6 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp0;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp13; <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.077722536</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c2-c4-c6 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.470602249</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c2+c4+c6 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];

    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.935414347</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170262339</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2;
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* -c1 */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp2;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.870828693</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c3+c1-c5 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>7</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 6x6 output block.
 *
 * Optimized algorithm with 3 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/12).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_6x6'></a>jpeg_idct_6x6</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp10, tmp11, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>6</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4 */</font>
    tmp1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp10;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp0;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp0;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 6 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4 */</font>
    tmp1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp10;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>-</font> tmp10;
    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp0;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp0;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>6</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 5x5 output block.
 *
 * Optimized algorithm with 5 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/10).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_5x5'></a>jpeg_idct_5x5</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp10, tmp11, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>5</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2+c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c4)/2 */</font>
    z3 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> z2;
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z1;
    tmp12 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

    <font color='#009900'>/* Odd part */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c3 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1-c3 */</font>
    tmp1 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1+c3 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 5 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2+c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c4)/2 */</font>
    z3 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> z2;
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z1;
    tmp12 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

    <font color='#009900'>/* Odd part */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c3 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1-c3 */</font>
    tmp1 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1+c3 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>5</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 4x4 output block.
 *
 * Optimized algorithm with 3 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point IDCT].
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_4x4'></a>jpeg_idct_4x4</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp2, tmp10, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>4</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    
    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Odd part */</font>
    <font color='#009900'>/* Same rotation as in the even part of the 8x8 LL&amp;M IDCT */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;               <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 4 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Odd part */</font>
    <font color='#009900'>/* Same rotation as in the even part of the 8x8 LL&amp;M IDCT */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c6 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>4</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 3x3 output block.
 *
 * Optimized algorithm with 2 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/6).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_3x3'></a>jpeg_idct_3x3</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp2, tmp10, tmp12;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>3</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp12;
    tmp2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 3 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp12;
    tmp2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>3</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 2x2 output block.
 *
 * Multiplication-less algorithm.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_2x2'></a>jpeg_idct_2x2</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp4, tmp5;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input. */</font>

  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;

  <font color='#009900'>/* Column 0 */</font>
  tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
  tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
  <font color='#009900'>/* Add fudge factor here for final descale. */</font>
  tmp4 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

  tmp0 <font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp5;
  tmp2 <font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>-</font> tmp5;

  <font color='#009900'>/* Column 1 */</font>
  tmp4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font><font color='#5555FF'>+</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font><font color='#5555FF'>+</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
  tmp5 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font><font color='#5555FF'>+</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font><font color='#5555FF'>+</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

  tmp1 <font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>+</font> tmp5;
  tmp3 <font color='#5555FF'>=</font> tmp4 <font color='#5555FF'>-</font> tmp5;

  <font color='#009900'>/* Pass 2: process 2 rows, store into output array. */</font>

  <font color='#009900'>/* Row 0 */</font>
  outptr <font color='#5555FF'>=</font> output_buf[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> output_col;

  outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp1, <font color='#979000'>3</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> RANGE_MASK];
  outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp1, <font color='#979000'>3</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> RANGE_MASK];

  <font color='#009900'>/* Row 1 */</font>
  outptr <font color='#5555FF'>=</font> output_buf[<font color='#979000'>1</font>] <font color='#5555FF'>+</font> output_col;

  outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>+</font> tmp3, <font color='#979000'>3</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> RANGE_MASK];
  outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2 <font color='#5555FF'>-</font> tmp3, <font color='#979000'>3</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> RANGE_MASK];
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 1x1 output block.
 *
 * We hardly need an inverse DCT routine for this: just take the
 * average pixel value, which is one-eighth of the DC coefficient.
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_1x1'></a>jpeg_idct_1x1</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  <font color='#0000FF'><u>int</u></font> dcval;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  SHIFT_TEMPS

  <font color='#009900'>/* 1x1 is trivial: just take the DC coefficient divided by 8. */</font>
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  dcval <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[<font color='#979000'>0</font>], quantptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
  dcval <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>DESCALE</font><font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> dcval, <font color='#979000'>3</font><font face='Lucida Console'>)</font>;

  output_buf[<font color='#979000'>0</font>][output_col] <font color='#5555FF'>=</font> range_limit[dcval <font color='#5555FF'>&amp;</font> RANGE_MASK];
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 9x9 output block.
 *
 * Optimized algorithm with 10 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/18).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_9x9'></a>jpeg_idct_9x9</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp10, tmp11, tmp12, tmp13, tmp14;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c6 */</font>
    tmp1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp0;
    tmp14 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp0 <font color='#5555FF'>-</font> tmp0;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.328926049</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.083350441</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c4 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.245575608</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c8 */</font>

    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2 <font color='#5555FF'>+</font> tmp3;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* -c3 */</font>

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.909038955</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c5 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.483689525</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c7 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> z2;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.392728481</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c1 */</font>
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> tmp1;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> tmp1;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 9 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>9</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c6 */</font>
    tmp1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp3;
    tmp2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp3 <font color='#5555FF'>-</font> tmp3;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp0;
    tmp14 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>-</font> tmp0 <font color='#5555FF'>-</font> tmp0;

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.328926049</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.083350441</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c4 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.245575608</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c8 */</font>

    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp0 <font color='#5555FF'>-</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp2 <font color='#5555FF'>+</font> tmp3;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* -c3 */</font>

    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.909038955</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c5 */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.483689525</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c7 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font> z2;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.392728481</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c1 */</font>
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> tmp1;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> tmp1;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 10x10 output block.
 *
 * Optimized algorithm with 12 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/20).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_10x10'></a>jpeg_idct_10x10</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24;
  INT32 z1, z2, z3, z4, z5;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* c0 = (c4-c8)*2 */</font>
			CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp13;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp13;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z4;
    tmp13 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z4;

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.309016994</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* (c3-c7)/2 */</font>
    z5 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.951056516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c3+c7)/2 */</font>
    z4 <font color='#5555FF'>=</font> z5 <font color='#5555FF'>+</font> tmp12;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.396802247</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.221231742</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c9 */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587785252</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c1-c9)/2 */</font>
    z4 <font color='#5555FF'>=</font> z5 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS <font color='#5555FF'>-</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> tmp13 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.260073511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z4; <font color='#009900'>/* c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.642039522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c7 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 10 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>10</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* c0 = (c4-c8)*2 */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp13;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp13;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z4;
    tmp13 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z4;

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.309016994</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* (c3-c7)/2 */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.951056516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c3+c7)/2 */</font>
    z4 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> tmp12;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.396802247</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.221231742</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c9 */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587785252</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c1-c9)/2 */</font>
    z4 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS <font color='#5555FF'>-</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> tmp13<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z3;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.260073511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z4; <font color='#009900'>/* c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.642039522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c7 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 11x11 output block.
 *
 * Optimized algorithm with 24 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/22).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_11x11'></a>jpeg_idct_11x11</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.546640132</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c2+c4 */</font>
    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.430815045</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c2-c6 */</font>
    z4 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp24 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.155664402</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* -(c2-c10) */</font>
    z4 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.356927976</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c2 */</font>
    tmp21 <font color='#5555FF'>=</font> tmp20 <font color='#5555FF'>+</font> tmp23 <font color='#5555FF'>+</font> tmp25 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.821790775</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c2+c4+c10-c6 */</font>
    tmp20 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp25 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.115825087</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c4+c6 */</font>
    tmp23 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp25 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.513598477</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6+c8 */</font>
    tmp24 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp25;
    tmp22 <font color='#5555FF'>=</font> tmp24 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.788749120</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c8+c10 */</font>
    tmp24 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.944413522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>        <font color='#009900'>/* c2+c8 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.390975730</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4+c10 */</font>
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.398430003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.887983902</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c3-c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.670361295</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c5-c9 */</font>
    tmp13 <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366151574</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c7-c9 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.923107866</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c7+c5+c3-c1-2*c9 */</font>
    z1    <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163011579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c7+c9 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.073276588</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c1+c7+3*c9-c3 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.192193623</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c3+c5-c7-c9 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.798248910</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* -(c1+c9) */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.102458632</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c1+c5+c9-c7 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.467221301</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* -(c5+c9) */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.001388905</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>            <font color='#009900'>/* c1-c9 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.684843907</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c3+c9 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 11 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>11</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.546640132</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c2+c4 */</font>
    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.430815045</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c2-c6 */</font>
    z4 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp24 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.155664402</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* -(c2-c10) */</font>
    z4 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.356927976</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c2 */</font>
    tmp21 <font color='#5555FF'>=</font> tmp20 <font color='#5555FF'>+</font> tmp23 <font color='#5555FF'>+</font> tmp25 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.821790775</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c2+c4+c10-c6 */</font>
    tmp20 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp25 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.115825087</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c4+c6 */</font>
    tmp23 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp25 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.513598477</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6+c8 */</font>
    tmp24 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp25;
    tmp22 <font color='#5555FF'>=</font> tmp24 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.788749120</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c8+c10 */</font>
    tmp24 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.944413522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>        <font color='#009900'>/* c2+c8 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.390975730</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4+c10 */</font>
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.398430003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.887983902</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c3-c9 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.670361295</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c5-c9 */</font>
    tmp13 <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366151574</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c7-c9 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.923107866</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;              <font color='#009900'>/* c7+c5+c3-c1-2*c9 */</font>
    z1    <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163011579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c7+c9 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.073276588</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c1+c7+3*c9-c3 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.192193623</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c3+c5-c7-c9 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.798248910</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* -(c1+c9) */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.102458632</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c1+c5+c9-c7 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.467221301</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font>          <font color='#009900'>/* -(c5+c9) */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.001388905</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>            <font color='#009900'>/* c1-c9 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.684843907</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c3+c9 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 12x12 output block.
 *
 * Optimized algorithm with 15 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/24).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_12x12'></a>jpeg_idct_12x12</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>12</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c4 */</font>

    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z4;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z4;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;

    tmp21 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> z2;

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> z1 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                  <font color='#009900'>/* c3 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* -c9 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c7 */</font>
    tmp12 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.261052384</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.280143716</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1-c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.045510580</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* -(c7+c11) */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.478575242</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c5-c7-c11 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.586706681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.676326758</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>        <font color='#009900'>/* c7-c11 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.982889723</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c5+c7 */</font>

    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z4;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z3;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_765366865<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3-c9 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_1_847759065<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3+c9 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 12 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>12</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c4 */</font>

    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z4;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z4;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;

    tmp21 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> z2;

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> z1 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                  <font color='#009900'>/* c3 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* -c9 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c7 */</font>
    tmp12 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.261052384</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.280143716</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1-c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.045510580</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* -(c7+c11) */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.478575242</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c5-c7-c11 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.586706681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.676326758</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>        <font color='#009900'>/* c7-c11 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.982889723</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c5+c7 */</font>

    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z4;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z3;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_765366865<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3-c9 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_1_847759065<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3+c9 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 13x13 output block.
 *
 * Optimized algorithm with 29 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/26).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_13x13'></a>jpeg_idct_13x13</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>13</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z4;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z4;

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.155388986</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c4+c6)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.096834934</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z1;           <font color='#009900'>/* (c4-c6)/2 */</font>

    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.373119086</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13;   <font color='#009900'>/* c2 */</font>
    tmp22 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.501487041</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>+</font> tmp13;   <font color='#009900'>/* c10 */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.316450131</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c8-c12)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.486914739</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z1;           <font color='#009900'>/* (c8+c12)/2 */</font>

    tmp21 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.058554052</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>+</font> tmp13;   <font color='#009900'>/* c6 */</font>
    tmp25 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.252223920</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13; <font color='#009900'>/* c4 */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.435816023</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c2-c10)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937303064</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z1;           <font color='#009900'>/* (c2+c10)/2 */</font>

    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170464608</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp13; <font color='#009900'>/* c12 */</font>
    tmp24 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.803364869</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> tmp13; <font color='#009900'>/* c8 */</font>

    tmp26 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z1;      <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.322312651</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163874945</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c5 */</font>
    tmp15 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z4;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937797057</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.020082300</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c7+c5+c3-c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.338443458</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* -c11 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.837223564</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5+c9+c11-c3 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.572116027</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c5-c9-c11 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163874945</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* -c5 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.205608352</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3+c5+c9-c7 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657217813</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* -c9 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.338443458</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c11 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.318774355</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c9-c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.466105296</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1-c7 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937797057</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c7 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.384515595</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c3-c7 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.742345811</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c1+c11 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>12</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 13 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>13</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z4;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z4;

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.155388986</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c4+c6)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.096834934</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z1;           <font color='#009900'>/* (c4-c6)/2 */</font>

    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.373119086</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13;   <font color='#009900'>/* c2 */</font>
    tmp22 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.501487041</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>+</font> tmp13;   <font color='#009900'>/* c10 */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.316450131</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c8-c12)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.486914739</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z1;           <font color='#009900'>/* (c8+c12)/2 */</font>

    tmp21 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.058554052</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>+</font> tmp13;   <font color='#009900'>/* c6 */</font>
    tmp25 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.252223920</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13; <font color='#009900'>/* c4 */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.435816023</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                <font color='#009900'>/* (c2-c10)/2 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937303064</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z1;           <font color='#009900'>/* (c2+c10)/2 */</font>

    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170464608</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp13; <font color='#009900'>/* c12 */</font>
    tmp24 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.803364869</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font> tmp13; <font color='#009900'>/* c8 */</font>

    tmp26 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z1;      <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.322312651</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163874945</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c5 */</font>
    tmp15 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z4;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937797057</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.020082300</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c7+c5+c3-c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.338443458</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* -c11 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.837223564</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5+c9+c11-c3 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.572116027</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c5-c9-c11 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.163874945</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* -c5 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.205608352</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3+c5+c9-c7 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.657217813</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* -c9 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14;
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp15, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.338443458</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c11 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.318774355</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> <font color='#009900'>/* c9-c11 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.466105296</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1-c7 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.937797057</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* c7 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.384515595</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>   <font color='#009900'>/* c3-c7 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.742345811</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c1+c11 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>12</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 14x14 output block.
 *
 * Optimized algorithm with 20 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/28).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_14x14'></a>jpeg_idct_14x14</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>14</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c12 */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z4;

    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> z4<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c0 = (c4+c12-c8)*2 */</font>
			CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.105676686</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    tmp13 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.273079590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719280954</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6+c10 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* c10 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c2 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp13;
    tmp26 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp13;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp14;
    tmp25 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14;
    tmp22 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp15;
    tmp24 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp15;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    tmp14 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.334852607</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.197448846</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.126980169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3+c5-c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752406978</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c9 */</font>
    tmp16 <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061150426</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11-c13 */</font>
    z1    <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.467085129</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp13;        <font color='#009900'>/* c11 */</font>
    tmp16 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15;
    z1    <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4;
    z4    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.158341681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp13; <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.424103948</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c3-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.373959773</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c3+c5-c13 */</font>
    z4    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.405321284</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.6906431334</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c9-c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.674957567</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1+c11-c5 */</font>

    tmp13 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>13</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>12</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp16, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp16, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 14 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>14</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c12 */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z4;

    tmp23 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> z4<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c0 = (c4+c12-c8)*2 */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.105676686</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    tmp13 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.273079590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719280954</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6+c10 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* c10 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c2 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp13;
    tmp26 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp13;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp14;
    tmp25 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14;
    tmp22 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp15;
    tmp24 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp15;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];
    z4 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    tmp14 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.334852607</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.197448846</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.126980169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3+c5-c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752406978</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c9 */</font>
    tmp16 <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061150426</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11-c13 */</font>
    z1    <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.467085129</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z4;           <font color='#009900'>/* c11 */</font>
    tmp16 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.158341681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z4;    <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.424103948</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c3-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.373959773</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c3+c5-c13 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.405321284</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.6906431334</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c9-c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.674957567</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c1+c11-c5 */</font>

    tmp13 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z4;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>13</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>12</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp16,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp16,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 15x15 output block.
 *
 * Optimized algorithm with 22 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/30).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_15x15'></a>jpeg_idct_15x15</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26, tmp27;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>15</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c12 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6 */</font>

    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> tmp10;
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> tmp11;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp10<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font>;             <font color='#009900'>/* c0 = (c6-c12)*2 */</font>

    z4 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z3;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.337628990</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2+c4)/2 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.045680613</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.439773946</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c4+c14 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp11;
    tmp23 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> z2;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.547059574</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c8+c14)/2 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.399234004</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c8-c14)/2 */</font>

    tmp25 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>-</font> tmp11;
    tmp26 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> z2;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c6+c12)/2 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c6-c12)/2 */</font>

    tmp21 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp11;
    tmp24 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp11;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11;
    tmp22 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> tmp11;                     <font color='#009900'>/* c10 = c6-c12 */</font>
    tmp27 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11;             <font color='#009900'>/* c0 = (c6-c12)*2 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                    <font color='#009900'>/* c5 */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp13 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z4;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c3-c9 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c3+c9 */</font>

    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* -c9 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.344997024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* -c3 */</font>
    z2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z4;
    tmp12 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.406466353</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* c1 */</font>

    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.457431844</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp15; <font color='#009900'>/* c1+c7 */</font>
    tmp16 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.112434820</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp13; <font color='#009900'>/* c1-c13 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z3;            <font color='#009900'>/* c5 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.575212477</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* c11 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.475753014</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z3;      <font color='#009900'>/* c7-c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.869244010</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z3;      <font color='#009900'>/* c11+c13 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>14</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>13</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>12</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp16, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp16, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 15 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>15</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c12 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6 */</font>

    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> tmp10;
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> tmp11;
    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp10<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font>;             <font color='#009900'>/* c0 = (c6-c12)*2 */</font>

    z4 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z3;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.337628990</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2+c4)/2 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.045680613</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.439773946</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c4+c14 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp11;
    tmp23 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> z2;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.547059574</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c8+c14)/2 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.399234004</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c8-c14)/2 */</font>

    tmp25 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>-</font> tmp11;
    tmp26 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> z2;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c6+c12)/2 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c6-c12)/2 */</font>

    tmp21 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp10 <font color='#5555FF'>+</font> tmp11;
    tmp24 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>+</font> tmp11;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp11;
    tmp22 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> tmp11;                     <font color='#009900'>/* c10 = c6-c12 */</font>
    tmp27 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>-</font> tmp11;             <font color='#009900'>/* c0 = (c6-c12)*2 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                    <font color='#009900'>/* c5 */</font>
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp13 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z4;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c3-c9 */</font>
    tmp14 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c3+c9 */</font>

    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* -c9 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.344997024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* -c3 */</font>
    z2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z4;
    tmp12 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.406466353</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;            <font color='#009900'>/* c1 */</font>

    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.457431844</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp15; <font color='#009900'>/* c1+c7 */</font>
    tmp16 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.112434820</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp13; <font color='#009900'>/* c1-c13 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z3;            <font color='#009900'>/* c5 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.575212477</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* c11 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.475753014</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z3;      <font color='#009900'>/* c7-c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.869244010</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z3;      <font color='#009900'>/* c11+c13 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>14</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>13</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>12</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp16,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp16,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 16x16 output block.
 *
 * Optimized algorithm with 28 multiplications in the 1-D kernel.
 * cK represents sqrt(2) * cos(K*pi/32).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_16x16'></a>jpeg_idct_16x16</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		 JCOEFPTR coef_block,
		 JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp10, tmp11, tmp12, tmp13;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26, tmp27;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>16</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>1</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c4[16] = c2[8] */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c12[16] = c6[8] */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c14[16] = c7[8] */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c2[16] = c1[8] */</font>

    tmp0 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_2_562915447<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6+c2)[16] = (c3+c1)[8] */</font>
    tmp1 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_899976223<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6-c14)[16] = (c3-c7)[8] */</font>
    tmp2 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.601344887</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c10)[16] = (c1-c5)[8] */</font>
    tmp3 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.509795579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c10-c14)[16] = (c5-c7)[8] */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp0;
    tmp27 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp0;
    tmp21 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp1;
    tmp26 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp1;
    tmp22 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp2;
    tmp25 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp2;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp3;
    tmp24 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp0  <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7+c5+c3-c1 */</font>
    tmp13 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.835730603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11+c13-c15 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c15 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9+c11-c3-c15 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c5+c7+c15-c3 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.766367282</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c11-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.971951411</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c13-c7 */</font>
    z2    <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4;
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c11 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3+c11+c15-c7 */</font>
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c5 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>3.141271809</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c3 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp0,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>15</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp0,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp1,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>14</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp1,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp2,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>13</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp2,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp3,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>12</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp3,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 16 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>16</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c4[16] = c2[8] */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c12[16] = c6[8] */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    z3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c14[16] = c7[8] */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c2[16] = c1[8] */</font>

    tmp0 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_2_562915447<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6+c2)[16] = (c3+c1)[8] */</font>
    tmp1 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_899976223<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6-c14)[16] = (c3-c7)[8] */</font>
    tmp2 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.601344887</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c10)[16] = (c1-c5)[8] */</font>
    tmp3 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.509795579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c10-c14)[16] = (c5-c7)[8] */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp0;
    tmp27 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp0;
    tmp21 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp1;
    tmp26 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp1;
    tmp22 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp2;
    tmp25 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp2;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp3;
    tmp24 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp0  <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7+c5+c3-c1 */</font>
    tmp13 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.835730603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11+c13-c15 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c15 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9+c11-c3-c15 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c5+c7+c15-c3 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.766367282</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c11-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.971951411</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c13-c7 */</font>
    z2    <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4;
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c11 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3+c11+c15-c7 */</font>
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c5 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>3.141271809</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c3 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp0,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>15</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp0,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp1,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>14</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp1,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp2,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>13</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp2,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp3,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>12</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp3,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 16x8 output block.
 *
 * 8-point IDCT in pass 1 (columns), 16-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_16x8'></a>jpeg_idct_16x8</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp10, tmp11, tmp12, tmp13;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26, tmp27;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true IDCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> DCTSIZE; ctr <font color='#5555FF'>&gt;</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Due to quantization, we will usually find that many of the input
     * coefficients are zero, especially the AC terms.  We can exploit this
     * by short-circuiting the IDCT calculation for any column in which all
     * the AC terms are zero.  In that case each output is equal to the
     * DC coefficient (with scale factor as needed).
     * With typical images and quantization tables, half or more of the
     * column DCT calculations can be simplified this way.
     */</font>
    
    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
      <font color='#009900'>/* AC terms all zero */</font>
      <font color='#0000FF'><u>int</u></font> dcval <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;
      
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> dcval;
      
      inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
      quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      <font color='#0000FF'>continue</font>;
    <b>}</b>
    
    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>
    
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>;
    
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp0 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z3;
    tmp1 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z3;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;
    
    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>
    
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    
    z2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    
    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>
    
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    
    inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
    quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 8 rows from work array, store into output array.
   * 16-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/32).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c4[16] = c2[8] */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c12[16] = c6[8] */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    z3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c14[16] = c7[8] */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c2[16] = c1[8] */</font>

    tmp0 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_2_562915447<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6+c2)[16] = (c3+c1)[8] */</font>
    tmp1 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_899976223<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6-c14)[16] = (c3-c7)[8] */</font>
    tmp2 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.601344887</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c10)[16] = (c1-c5)[8] */</font>
    tmp3 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.509795579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c10-c14)[16] = (c5-c7)[8] */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp0;
    tmp27 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp0;
    tmp21 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp1;
    tmp26 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp1;
    tmp22 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp2;
    tmp25 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp2;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp3;
    tmp24 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp0  <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7+c5+c3-c1 */</font>
    tmp13 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.835730603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11+c13-c15 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c15 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9+c11-c3-c15 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c5+c7+c15-c3 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.766367282</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c11-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.971951411</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c13-c7 */</font>
    z2    <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4;
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c11 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3+c11+c15-c7 */</font>
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c5 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>3.141271809</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c3 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp0,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>15</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp0,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp1,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>14</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp1,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp2,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>13</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp2,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp3,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>12</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp3,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 14x7 output block.
 *
 * 7-point IDCT in pass 1 (columns), 14-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_14x7'></a>jpeg_idct_14x7</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 7-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/14).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp23 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp23 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c4 */</font>
    tmp22 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    tmp21 <font color='#5555FF'>=</font> tmp20 <font color='#5555FF'>+</font> tmp22 <font color='#5555FF'>+</font> tmp23 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.841218003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c4-c6 */</font>
    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp10;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp23; <font color='#009900'>/* c2 */</font>
    tmp20 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.077722536</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2-c4-c6 */</font>
    tmp22 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.470602249</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2+c4+c6 */</font>
    tmp23 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.935414347</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170262339</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp12;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* -c1 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.870828693</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c3+c1-c5 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 7 rows from work array, store into output array.
   * 14-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/28).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c12 */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z4;

    tmp23 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> z4<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c0 = (c4+c12-c8)*2 */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.105676686</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    tmp13 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.273079590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719280954</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6+c10 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* c10 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c2 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp13;
    tmp26 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp13;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp14;
    tmp25 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14;
    tmp22 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp15;
    tmp24 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp15;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];
    z4 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    tmp14 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.334852607</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.197448846</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.126980169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3+c5-c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752406978</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c9 */</font>
    tmp16 <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061150426</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11-c13 */</font>
    z1    <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.467085129</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z4;           <font color='#009900'>/* c11 */</font>
    tmp16 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.158341681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z4;    <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.424103948</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c3-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.373959773</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c3+c5-c13 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.405321284</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.6906431334</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c9-c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.674957567</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c1+c11-c5 */</font>

    tmp13 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z4;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>13</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>12</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp16,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp16,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 12x6 output block.
 *
 * 6-point IDCT in pass 1 (columns), 12-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_12x6'></a>jpeg_idct_12x6</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp20;
    tmp21 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp20 <font color='#5555FF'>-</font> tmp20, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp20, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2 */</font>
    tmp20 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp10;
    tmp22 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp10;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 6 rows from work array, store into output array.
   * 12-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/24).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c4 */</font>

    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z4;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z4;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;

    tmp21 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> z2;

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> z1 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                  <font color='#009900'>/* c3 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* -c9 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c7 */</font>
    tmp12 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.261052384</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.280143716</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1-c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.045510580</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* -(c7+c11) */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.478575242</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c5-c7-c11 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.586706681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.676326758</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>        <font color='#009900'>/* c7-c11 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.982889723</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c5+c7 */</font>

    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z4;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z3;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_765366865<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3-c9 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_1_847759065<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3+c9 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>11</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>10</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>]  <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15,
					       CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			     <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 10x5 output block.
 *
 * 5-point IDCT in pass 1 (columns), 10-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_10x5'></a>jpeg_idct_10x5</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 5-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/10).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2+c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c4)/2 */</font>
    z3 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> z2;
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z1;
    tmp12 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

    <font color='#009900'>/* Odd part */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c3 */</font>
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c1-c3 */</font>
    tmp14 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c1+c3 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 5 rows from work array, store into output array.
   * 10-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/20).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>;               <font color='#009900'>/* c0 = (c4-c8)*2 */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp13;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp13;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z4 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];

    tmp11 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z4;
    tmp13 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z4;

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.309016994</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* (c3-c7)/2 */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.951056516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c3+c7)/2 */</font>
    z4 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> tmp12;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.396802247</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.221231742</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c9 */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587785252</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c1-c9)/2 */</font>
    z4 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS <font color='#5555FF'>-</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> tmp13<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z3;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.260073511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z4; <font color='#009900'>/* c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.642039522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c7 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>9</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>8</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>8</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 8x4 output block.
 *
 * 4-point IDCT in pass 1 (columns), 8-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_8x4'></a>jpeg_idct_8x4</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 4-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Odd part */</font>
    <font color='#009900'>/* Same rotation as in the even part of the 8x8 LL&amp;M IDCT */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;               <font color='#009900'>/* c6 */</font>
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2-c6 */</font>
		       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>, <font color='#009900'>/* c2+c6 */</font>
		       CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process rows from work array, store into output array. */</font>
  <font color='#009900'>/* Note that we must descale the results by a factor of 8 == 2**3, */</font>
  <font color='#009900'>/* and also undo the PASS1_BITS scaling. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>;
    
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    tmp3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];

    z2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;

    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 6x3 output block.
 *
 * 3-point IDCT in pass 1 (columns), 6-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_6x3'></a>jpeg_idct_6x3</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp10, tmp11, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>3</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 3-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/6).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp12;
    tmp2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>
  
  <font color='#009900'>/* Pass 2: process 3 rows from work array, store into output array.
   * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4 */</font>
    tmp1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp10;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>-</font> tmp10;
    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp0;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp0;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>6</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 4x2 output block.
 *
 * 2-point IDCT in pass 1 (columns), 4-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_4x2'></a>jpeg_idct_4x2</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp2, tmp10, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  INT32 <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  INT32 workspace[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>2</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp0;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp0;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 2 rows from work array, store into output array.
   * 4-point IDCT kernel,
   * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point IDCT].
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> wsptr[<font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Odd part */</font>
    <font color='#009900'>/* Same rotation as in the even part of the 8x8 LL&amp;M IDCT */</font>

    z2 <font color='#5555FF'>=</font> wsptr[<font color='#979000'>1</font>];
    z3 <font color='#5555FF'>=</font> wsptr[<font color='#979000'>3</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c6 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>4</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 2x1 output block.
 *
 * 1-point IDCT in pass 1 (columns), 2-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_2x1'></a>jpeg_idct_2x1</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp10;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: empty. */</font>

  <font color='#009900'>/* Pass 2: process 1 row from input, store into output array. */</font>

  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  outptr <font color='#5555FF'>=</font> output_buf[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> output_col;

  <font color='#009900'>/* Even part */</font>

  tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[<font color='#979000'>0</font>], quantptr[<font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
  <font color='#009900'>/* Add fudge factor here for final descale. */</font>
  tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

  <font color='#009900'>/* Odd part */</font>

  tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[<font color='#979000'>1</font>], quantptr[<font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Final output stage */</font>

  outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, <font color='#979000'>3</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> RANGE_MASK];
  outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, <font color='#979000'>3</font><font face='Lucida Console'>)</font> <font color='#5555FF'>&amp;</font> RANGE_MASK];
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 8x16 output block.
 *
 * 16-point IDCT in pass 1 (columns), 8-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_8x16'></a>jpeg_idct_8x16</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3, tmp10, tmp11, tmp12, tmp13;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26, tmp27;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>16</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 16-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/32).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c4[16] = c2[8] */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_541196100<font face='Lucida Console'>)</font>;       <font color='#009900'>/* c12[16] = c6[8] */</font>

    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp1;
    tmp11 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp1;
    tmp12 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.275899379</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c14[16] = c7[8] */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.387039845</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c2[16] = c1[8] */</font>

    tmp0 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_2_562915447<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6+c2)[16] = (c3+c1)[8] */</font>
    tmp1 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_899976223<font face='Lucida Console'>)</font>;  <font color='#009900'>/* (c6-c14)[16] = (c3-c7)[8] */</font>
    tmp2 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.601344887</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c10)[16] = (c1-c5)[8] */</font>
    tmp3 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.509795579</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c10-c14)[16] = (c5-c7)[8] */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp0;
    tmp27 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp0;
    tmp21 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp1;
    tmp26 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp1;
    tmp22 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp2;
    tmp25 <font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>-</font> tmp2;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp3;
    tmp24 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    tmp1  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c3 */</font>
    tmp2  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c5 */</font>
    tmp3  <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.093201867</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c7 */</font>
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.897167586</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11,   <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c11 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp0  <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp2 <font color='#5555FF'>+</font> tmp3 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.286341144</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c7+c5+c3-c1 */</font>
    tmp13 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>-</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.835730603</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11+c13-c15 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.138617169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c15 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.071888074</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c9+c11-c3-c15 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.125726048</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c5+c7+c15-c3 */</font>
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.407403738</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c1 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.766367282</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c11-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.971951411</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c13-c7 */</font>
    z2    <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4;
    z1    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.666655658</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c11 */</font>
    tmp1  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.065388962</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c3+c11+c15-c7 */</font>
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.247225013</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* -c5 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>3.141271809</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1+c5+c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.353318001</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* -c3 */</font>
    tmp2  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp3  <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    z2    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.410524528</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c13 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp0,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>15</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp0,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp1,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>14</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp1,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp2,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>13</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp2,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp3,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>12</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp3,  CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>8</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp27 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>
  
  <font color='#009900'>/* Pass 2: process rows from work array, store into output array. */</font>
  <font color='#009900'>/* Note that we must descale the results by a factor of 8 == 2**3, */</font>
  <font color='#009900'>/* and also undo the PASS1_BITS scaling. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>16</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;
    
    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>
    
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];
    
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>;
    
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;
    
    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>
    
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>7</font>];
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    tmp3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    
    z2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    
    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>
    
    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>7</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    
    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> DCTSIZE;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 7x14 output block.
 *
 * 14-point IDCT in pass 1 (columns), 7-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_7x14'></a>jpeg_idct_7x14</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15, tmp16;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25, tmp26;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>14</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 14-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/28).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>7</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c12 */</font>
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp11 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z4;

    tmp23 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3 <font color='#5555FF'>-</font> z4<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>, <font color='#009900'>/* c0 = (c4+c12-c8)*2 */</font>
			CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.105676686</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>

    tmp13 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.273079590</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.719280954</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c6+c10 */</font>
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>     <font color='#009900'>/* c10 */</font>
	    <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c2 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp13;
    tmp26 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp13;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp14;
    tmp25 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp14;
    tmp22 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp15;
    tmp24 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp15;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp13 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    tmp14 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.334852607</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c3 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.197448846</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.126980169</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c3+c5-c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.752406978</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;             <font color='#009900'>/* c9 */</font>
    tmp16 <font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.061150426</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* c9+c11-c13 */</font>
    z1    <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.467085129</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp13;        <font color='#009900'>/* c11 */</font>
    tmp16 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15;
    z1    <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4;
    z4    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.158341681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> tmp13; <font color='#009900'>/* -c13 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.424103948</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c3-c9-c13 */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.373959773</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c3+c5-c13 */</font>
    z4    <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.405321284</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> tmp13 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.6906431334</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c9-c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.674957567</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c1+c11-c5 */</font>

    tmp13 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>13</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>12</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>+</font> tmp16, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>7</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp26 <font color='#5555FF'>-</font> tmp16, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 14 rows from work array, store into output array.
   * 7-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/14).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>14</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp23 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp23 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>6</font>];

    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>-</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.881747734</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c4 */</font>
    tmp22 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.314692123</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c6 */</font>
    tmp21 <font color='#5555FF'>=</font> tmp20 <font color='#5555FF'>+</font> tmp22 <font color='#5555FF'>+</font> tmp23 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.841218003</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c4-c6 */</font>
    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> tmp10;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.274162392</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> tmp23; <font color='#009900'>/* c2 */</font>
    tmp20 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.077722536</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2-c4-c6 */</font>
    tmp22 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.470602249</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2+c4+c6 */</font>
    tmp23 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.414213562</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* c0 */</font>

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.935414347</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c3+c1-c5)/2 */</font>
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.170262339</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* (c3+c5-c1)/2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp12;
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.378756276</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;     <font color='#009900'>/* -c1 */</font>
    tmp11 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp12;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.613604268</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2;
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.870828693</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;      <font color='#009900'>/* c3+c1-c5 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>6</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>7</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 6x12 output block.
 *
 * 12-point IDCT in pass 1 (columns), 6-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_6x12'></a>jpeg_idct_6x12</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14, tmp15;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24, tmp25;
  INT32 z1, z2, z3, z4;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>12</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 12-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/24).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c4 */</font>

    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z4;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z4;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    z1 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;

    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> z2;

    tmp21 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>+</font> z2;

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp25 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;

    tmp12 <font color='#5555FF'>=</font> z4 <font color='#5555FF'>-</font> z1 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp12;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.306562965</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                  <font color='#009900'>/* c3 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* -c9 */</font>

    tmp10 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp15 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.860918669</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;          <font color='#009900'>/* c7 */</font>
    tmp12 <font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.261052384</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c5-c7 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.280143716</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;  <font color='#009900'>/* c1-c5 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>+</font> z4, <font color='#5555FF'>-</font> <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.045510580</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* -(c7+c11) */</font>
    tmp12 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp13 <font color='#5555FF'>+</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.478575242</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c5-c7-c11 */</font>
    tmp13 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp15 <font color='#5555FF'>-</font> tmp11 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.586706681</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1+c11 */</font>
    tmp15 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> tmp14 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.676326758</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font>        <font color='#009900'>/* c7-c11 */</font>
	     <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.982889723</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c5+c7 */</font>

    z1 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z4;
    z2 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z3;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2, FIX_0_541196100<font face='Lucida Console'>)</font>;                 <font color='#009900'>/* c9 */</font>
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, FIX_0_765366865<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3-c9 */</font>
    tmp14 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_1_847759065<font face='Lucida Console'>)</font>;              <font color='#009900'>/* c3+c9 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>0</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>11</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>1</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>10</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>2</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>9</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>3</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>8</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>4</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>7</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>5</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>+</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>6</font><font color='#5555FF'>*</font><font color='#979000'>6</font>]  <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp25 <font color='#5555FF'>-</font> tmp15, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 12 rows from work array, store into output array.
   * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>12</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    tmp20 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4 */</font>
    tmp11 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp20;
    tmp21 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp20 <font color='#5555FF'>-</font> tmp20;
    tmp20 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp20, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2 */</font>
    tmp20 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp10;
    tmp22 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp10;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>5</font>];
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp11 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>5</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>6</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 5x10 output block.
 *
 * 10-point IDCT in pass 1 (columns), 5-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_5x10'></a>jpeg_idct_5x10</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
		JCOEFPTR coef_block,
		JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp10, tmp11, tmp12, tmp13, tmp14;
  INT32 tmp20, tmp21, tmp22, tmp23, tmp24;
  INT32 z1, z2, z3, z4, z5;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>10</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 10-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/20).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>5</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.144122806</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c4 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z4, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.437016024</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;         <font color='#009900'>/* c8 */</font>
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z2;

    tmp22 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font>,   <font color='#009900'>/* c0 = (c4-c8)*2 */</font>
			CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c6 */</font>
    tmp12 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    tmp20 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp12;
    tmp24 <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp12;
    tmp21 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>+</font> tmp13;
    tmp23 <font color='#5555FF'>=</font> tmp11 <font color='#5555FF'>-</font> tmp13;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    z4 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;

    tmp11 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z4;
    tmp13 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z4;

    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.309016994</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;        <font color='#009900'>/* (c3-c7)/2 */</font>
    z5 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.951056516</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c3+c7)/2 */</font>
    z4 <font color='#5555FF'>=</font> z5 <font color='#5555FF'>+</font> tmp12;

    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.396802247</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>+</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c1 */</font>
    tmp14 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.221231742</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c9 */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp11, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.587785252</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;           <font color='#009900'>/* (c1-c9)/2 */</font>
    z4 <font color='#5555FF'>=</font> z5 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> <font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS <font color='#5555FF'>-</font> <font color='#979000'>1</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> tmp13 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.260073511</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z4; <font color='#009900'>/* c3 */</font>
    tmp13 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.642039522</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font> <font color='#5555FF'>-</font> z2 <font color='#5555FF'>+</font> z4; <font color='#009900'>/* c7 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>+</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>9</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp20 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>+</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>8</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp21 <font color='#5555FF'>-</font> tmp11, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>+</font> tmp12<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp22 <font color='#5555FF'>-</font> tmp12<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>+</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp23 <font color='#5555FF'>-</font> tmp13, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>+</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>5</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp24 <font color='#5555FF'>-</font> tmp14, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 10 rows from work array, store into output array.
   * 5-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/10).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>10</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp12 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp13 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp14 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>4</font>];
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.790569415</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2+c4)/2 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp14, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.353553391</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* (c2-c4)/2 */</font>
    z3 <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> z2;
    tmp10 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>+</font> z1;
    tmp11 <font color='#5555FF'>=</font> z3 <font color='#5555FF'>-</font> z1;
    tmp12 <font color='#5555FF'>-</font><font color='#5555FF'>=</font> z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

    <font color='#009900'>/* Odd part */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.831253876</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;       <font color='#009900'>/* c3 */</font>
    tmp13 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.513743148</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c1-c3 */</font>
    tmp14 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>2.176250899</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;    <font color='#009900'>/* c1+c3 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>4</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp13,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp14,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>5</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 4x8 output block.
 *
 * 8-point IDCT in pass 1 (columns), 4-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_4x8'></a>jpeg_idct_4x8</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp3;
  INT32 tmp10, tmp11, tmp12, tmp13;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>8</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array. */</font>
  <font color='#009900'>/* Note results are scaled up by sqrt(8) compared to a true IDCT; */</font>
  <font color='#009900'>/* furthermore, we scale the results by 2**PASS1_BITS. */</font>

  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>4</font>; ctr <font color='#5555FF'>&gt;</font> <font color='#979000'>0</font>; ctr<font color='#5555FF'>-</font><font color='#5555FF'>-</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Due to quantization, we will usually find that many of the input
     * coefficients are zero, especially the AC terms.  We can exploit this
     * by short-circuiting the IDCT calculation for any column in which all
     * the AC terms are zero.  In that case each output is equal to the
     * DC coefficient (with scale factor as needed).
     * With typical images and quantization tables, half or more of the
     * column DCT calculations can be simplified this way.
     */</font>

    <font color='#0000FF'>if</font> <font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font> inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font> <font color='#5555FF'>&amp;</font><font color='#5555FF'>&amp;</font>
	inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font><font color='#5555FF'>=</font> <font color='#979000'>0</font><font face='Lucida Console'>)</font> <b>{</b>
      <font color='#009900'>/* AC terms all zero */</font>
      <font color='#0000FF'><u>int</u></font> dcval <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> dcval;
      wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> dcval;

      inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
      quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
      <font color='#0000FF'>continue</font>;
    <b>}</b>

    <font color='#009900'>/* Even part: reverse the even part of the forward DCT. */</font>
    <font color='#009900'>/* The rotator is sqrt(2)*c(-6). */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>6</font>]<font face='Lucida Console'>)</font>;
    
    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>;
    
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    z3 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;

    tmp0 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>+</font> z3;
    tmp1 <font color='#5555FF'>=</font> z2 <font color='#5555FF'>-</font> z3;
    
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    tmp13 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp2;
    tmp11 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp3;

    <font color='#009900'>/* Odd part per figure 8; the matrix is unitary and hence its
     * transpose is its inverse.  i0..i3 are y7,y5,y3,y1 respectively.
     */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>7</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

    z2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp2;
    z3 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_1_175875602<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * c3 */</font>
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, <font color='#5555FF'>-</font> FIX_1_961570560<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c3-c5) */</font>
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, <font color='#5555FF'>-</font> FIX_0_390180644<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c5-c3) */</font>
    z2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;
    z3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp3, <font color='#5555FF'>-</font> FIX_0_899976223<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (c7-c3) */</font>
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp0, FIX_0_298631336<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1+c3+c5-c7) */</font>
    tmp3 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp3, FIX_1_501321110<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5-c7) */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;
    tmp3 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1 <font color='#5555FF'>+</font> tmp2, <font color='#5555FF'>-</font> FIX_2_562915447<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * (-c1-c3) */</font>
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp1, FIX_2_053119869<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3-c5+c7) */</font>
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, FIX_3_072711026<font face='Lucida Console'>)</font>; <font color='#009900'>/* sqrt(2) * ( c1+c3+c5-c7) */</font>
    tmp1 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z3;
    tmp2 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> z2;

    <font color='#009900'>/* Final output stage: inputs are tmp10..tmp13, tmp0..tmp3 */</font>

    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>7</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp3, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>6</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp1, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>4</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp13 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;

    inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;			<font color='#009900'>/* advance pointers to next column */</font>
    quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
    wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 8 rows from work array, store into output array.
   * 4-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/16).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>8</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];

    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Odd part */</font>
    <font color='#009900'>/* Same rotation as in the even part of the 8x8 LL&amp;M IDCT */</font>

    z2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    z3 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>3</font>];

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c6 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>3</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    
    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>4</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a reduced-size 3x6 output block.
 *
 * 6-point IDCT in pass 1 (columns), 3-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_3x6'></a>jpeg_idct_3x6</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp1, tmp2, tmp10, tmp11, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  <font color='#0000FF'><u>int</u></font> <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  <font color='#0000FF'><u>int</u></font> workspace[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>6</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 6-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/12).
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>3</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font color='#5555FF'>-</font><font color='#979000'>1</font><font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>4</font>]<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c4 */</font>
    tmp1 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp10;
    tmp11 <font color='#5555FF'>=</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp10 <font color='#5555FF'>-</font> tmp10, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp10, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;   <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> tmp0;
    tmp12 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>-</font> tmp0;

    <font color='#009900'>/* Odd part */</font>

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>5</font>]<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z3, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.366025404</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c5 */</font>
    tmp0 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z1 <font color='#5555FF'>+</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> tmp1 <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font><font face='Lucida Console'>(</font>z3 <font color='#5555FF'>-</font> z2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS<font face='Lucida Console'>)</font>;
    tmp1 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>z1 <font color='#5555FF'>-</font> z2 <font color='#5555FF'>-</font> z3<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> PASS1_BITS;

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>5</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>+</font> tmp1<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>4</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font face='Lucida Console'>(</font>tmp11 <font color='#5555FF'>-</font> tmp1<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>+</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
    wsptr[<font color='#979000'>3</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp12 <font color='#5555FF'>-</font> tmp2, CONST_BITS<font color='#5555FF'>-</font>PASS1_BITS<font face='Lucida Console'>)</font>;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 6 rows from work array, store into output array.
   * 3-point IDCT kernel, cK represents sqrt(2) * cos(K*pi/6).
   */</font>
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>6</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp0 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;
    tmp0 <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font><font color='#5555FF'>=</font> CONST_BITS;
    tmp2 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>2</font>];
    tmp12 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp2, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>0.707106781</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c2 */</font>
    tmp10 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>+</font> tmp12;
    tmp2 <font color='#5555FF'>=</font> tmp0 <font color='#5555FF'>-</font> tmp12 <font color='#5555FF'>-</font> tmp12;

    <font color='#009900'>/* Odd part */</font>

    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>INT32<font face='Lucida Console'>)</font> wsptr[<font color='#979000'>1</font>];
    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>tmp12, <font color='#BB00BB'>FIX</font><font face='Lucida Console'>(</font><font color='#979000'>1.224744871</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>; <font color='#009900'>/* c1 */</font>

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>2</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp2,
					      CONST_BITS<font color='#5555FF'>+</font>PASS1_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>3</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 2x4 output block.
 *
 * 4-point IDCT in pass 1 (columns), 2-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_2x4'></a>jpeg_idct_2x4</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp2, tmp10, tmp12;
  INT32 z1, z2, z3;
  JCOEFPTR inptr;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  INT32 <font color='#5555FF'>*</font> wsptr;
  JSAMPROW outptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  <font color='#0000FF'><u>int</u></font> ctr;
  INT32 workspace[<font color='#979000'>2</font><font color='#5555FF'>*</font><font color='#979000'>4</font>];	<font color='#009900'>/* buffers data between passes */</font>
  SHIFT_TEMPS

  <font color='#009900'>/* Pass 1: process columns from input, store into work array.
   * 4-point IDCT kernel,
   * cK represents sqrt(2) * cos(K*pi/16) [refers to 8-point IDCT].
   */</font>
  inptr <font color='#5555FF'>=</font> coef_block;
  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;
  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, inptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, quantptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font>, wsptr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    <font color='#009900'>/* Even part */</font>

    tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
    tmp2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>2</font>]<font face='Lucida Console'>)</font>;

    tmp10 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>+</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;
    tmp12 <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>tmp0 <font color='#5555FF'>-</font> tmp2<font face='Lucida Console'>)</font> <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> CONST_BITS;

    <font color='#009900'>/* Odd part */</font>
    <font color='#009900'>/* Same rotation as in the even part of the 8x8 LL&amp;M IDCT */</font>

    z2 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;
    z3 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>inptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>3</font>]<font face='Lucida Console'>)</font>;

    z1 <font color='#5555FF'>=</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2 <font color='#5555FF'>+</font> z3, FIX_0_541196100<font face='Lucida Console'>)</font>;   <font color='#009900'>/* c6 */</font>
    tmp0 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>+</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z2, FIX_0_765366865<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2-c6 */</font>
    tmp2 <font color='#5555FF'>=</font> z1 <font color='#5555FF'>-</font> <font color='#BB00BB'>MULTIPLY</font><font face='Lucida Console'>(</font>z3, FIX_1_847759065<font face='Lucida Console'>)</font>; <font color='#009900'>/* c2+c6 */</font>

    <font color='#009900'>/* Final output stage */</font>

    wsptr[<font color='#979000'>2</font><font color='#5555FF'>*</font><font color='#979000'>0</font>] <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>+</font> tmp0;
    wsptr[<font color='#979000'>2</font><font color='#5555FF'>*</font><font color='#979000'>3</font>] <font color='#5555FF'>=</font> tmp10 <font color='#5555FF'>-</font> tmp0;
    wsptr[<font color='#979000'>2</font><font color='#5555FF'>*</font><font color='#979000'>1</font>] <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>+</font> tmp2;
    wsptr[<font color='#979000'>2</font><font color='#5555FF'>*</font><font color='#979000'>2</font>] <font color='#5555FF'>=</font> tmp12 <font color='#5555FF'>-</font> tmp2;
  <b>}</b>

  <font color='#009900'>/* Pass 2: process 4 rows from work array, store into output array. */</font>

  wsptr <font color='#5555FF'>=</font> workspace;
  <font color='#0000FF'>for</font> <font face='Lucida Console'>(</font>ctr <font color='#5555FF'>=</font> <font color='#979000'>0</font>; ctr <font color='#5555FF'>&lt;</font> <font color='#979000'>4</font>; ctr<font color='#5555FF'>+</font><font color='#5555FF'>+</font><font face='Lucida Console'>)</font> <b>{</b>
    outptr <font color='#5555FF'>=</font> output_buf[ctr] <font color='#5555FF'>+</font> output_col;

    <font color='#009900'>/* Even part */</font>

    <font color='#009900'>/* Add fudge factor here for final descale. */</font>
    tmp10 <font color='#5555FF'>=</font> wsptr[<font color='#979000'>0</font>] <font color='#5555FF'>+</font> <font face='Lucida Console'>(</font>ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font face='Lucida Console'>(</font>CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>2</font><font face='Lucida Console'>)</font><font face='Lucida Console'>)</font>;

    <font color='#009900'>/* Odd part */</font>

    tmp0 <font color='#5555FF'>=</font> wsptr[<font color='#979000'>1</font>];

    <font color='#009900'>/* Final output stage */</font>

    outptr[<font color='#979000'>0</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];
    outptr[<font color='#979000'>1</font>] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, CONST_BITS<font color='#5555FF'>+</font><font color='#979000'>3</font><font face='Lucida Console'>)</font>
			    <font color='#5555FF'>&amp;</font> RANGE_MASK];

    wsptr <font color='#5555FF'>+</font><font color='#5555FF'>=</font> <font color='#979000'>2</font>;		<font color='#009900'>/* advance pointer to next row */</font>
  <b>}</b>
<b>}</b>


<font color='#009900'>/*
 * Perform dequantization and inverse DCT on one block of coefficients,
 * producing a 1x2 output block.
 *
 * 2-point IDCT in pass 1 (columns), 1-point in pass 2 (rows).
 */</font>

<b><a name='GLOBAL'></a>GLOBAL</b><font face='Lucida Console'>(</font><font color='#0000FF'><u>void</u></font><font face='Lucida Console'>)</font>
<b><a name='jpeg_idct_1x2'></a>jpeg_idct_1x2</b> <font face='Lucida Console'>(</font>j_decompress_ptr cinfo, jpeg_component_info <font color='#5555FF'>*</font> compptr,
	       JCOEFPTR coef_block,
	       JSAMPARRAY output_buf, JDIMENSION output_col<font face='Lucida Console'>)</font>
<b>{</b>
  INT32 tmp0, tmp10;
  ISLOW_MULT_TYPE <font color='#5555FF'>*</font> quantptr;
  JSAMPLE <font color='#5555FF'>*</font>range_limit <font color='#5555FF'>=</font> <font color='#BB00BB'>IDCT_range_limit</font><font face='Lucida Console'>(</font>cinfo<font face='Lucida Console'>)</font>;
  SHIFT_TEMPS

  <font color='#009900'>/* Process 1 column from input, store into output array. */</font>

  quantptr <font color='#5555FF'>=</font> <font face='Lucida Console'>(</font>ISLOW_MULT_TYPE <font color='#5555FF'>*</font><font face='Lucida Console'>)</font> compptr<font color='#5555FF'>-</font><font color='#5555FF'>&gt;</font>dct_table;

  <font color='#009900'>/* Even part */</font>
    
  tmp10 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>0</font>]<font face='Lucida Console'>)</font>;
  <font color='#009900'>/* Add fudge factor here for final descale. */</font>
  tmp10 <font color='#5555FF'>+</font><font color='#5555FF'>=</font> ONE <font color='#5555FF'>&lt;</font><font color='#5555FF'>&lt;</font> <font color='#979000'>2</font>;

  <font color='#009900'>/* Odd part */</font>

  tmp0 <font color='#5555FF'>=</font> <font color='#BB00BB'>DEQUANTIZE</font><font face='Lucida Console'>(</font>coef_block[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>], quantptr[DCTSIZE<font color='#5555FF'>*</font><font color='#979000'>1</font>]<font face='Lucida Console'>)</font>;

  <font color='#009900'>/* Final output stage */</font>

  output_buf[<font color='#979000'>0</font>][output_col] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>+</font> tmp0, <font color='#979000'>3</font><font face='Lucida Console'>)</font>
					  <font color='#5555FF'>&amp;</font> RANGE_MASK];
  output_buf[<font color='#979000'>1</font>][output_col] <font color='#5555FF'>=</font> range_limit[<font face='Lucida Console'>(</font><font color='#0000FF'><u>int</u></font><font face='Lucida Console'>)</font> <font color='#BB00BB'>RIGHT_SHIFT</font><font face='Lucida Console'>(</font>tmp10 <font color='#5555FF'>-</font> tmp0, <font color='#979000'>3</font><font face='Lucida Console'>)</font>
					  <font color='#5555FF'>&amp;</font> RANGE_MASK];
<b>}</b>

<font color='#0000FF'>#endif</font> <font color='#009900'>/* IDCT_SCALING_SUPPORTED */</font>
<font color='#0000FF'>#endif</font> <font color='#009900'>/* DCT_ISLOW_SUPPORTED */</font>

</pre></body></html>